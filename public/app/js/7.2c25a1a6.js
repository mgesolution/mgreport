(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{ba9e:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{attrs:{padding:""}},[a("div",{staticClass:"q-pa-md row"},[a("div",{staticClass:"col-12 row justify-center"},[a("dropdown-filter",{attrs:{"render-data":e.koneksi,label:"Pilih Koneksi","select-name":"Nama","select-value":"ID"},on:{change:function(t){return e.selectedKoneksi=t}}})],1),a("div",{staticClass:"col-12 row justify-center"},[a("q-input",{staticClass:"full-width",attrs:{type:"textarea",filled:"",label:"Query"},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}})],1),a("div",{staticClass:"col-12"},[a("q-table",{attrs:{data:e.dataToShow,columns:e.columns,"row-key":"ID"},scopedSlots:e._u([{key:"top",fn:function(){return[a("q-expansion-item",{staticClass:"full-width",attrs:{"expand-separator":"",icon:"search",label:"Filters"}},[a("div",{staticClass:"row full-width"},e._l(e.filters,(function(t,l){return a("div",{key:"filter"+l,staticClass:"col-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[e._v("\n                    "+e._s(t.label+" : ")+"\n                    "),a("dropdown-filter",{attrs:{"render-data":e.dataType,label:"Pilih Type Filter","select-name":"Nama","select-value":"ID"},on:{change:function(a){return e.setTypeFilter(a,l,t.label)}}})],1),e.filters[l].type.value?a("div",{staticClass:"col-8 column justify-end"},[e.filters[l].type.label.includes("Text")?a("q-input",{attrs:{borderless:"",filled:"",dense:"",debounce:"300",placeholder:t.label},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!0),model:{value:e.filters[l].value,callback:function(t){e.$set(e.filters[l],"value",t)},expression:"filters[index].value"}}):e.filters[l].type.label.includes("Time")?a("q-input",{attrs:{borderless:"",filled:"",dense:"",debounce:"300",readonly:"",placeholder:t.label,mask:"##:##:##"},on:{click:function(a){return a.target!==a.currentTarget?null:e.showTimePicker("time"+t.label,t.label)}},scopedSlots:e._u([{key:"append",fn:function(){return[e.filters[l].value?a("q-icon",{attrs:{name:"clear"},on:{click:function(a){return a.stopPropagation(),e.clearTime(""+t.label,l)}}}):a("q-icon",{attrs:{name:"search"}}),a("q-popup-proxy",{ref:"time"+t.label,refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{mask:"HH:mm:ss","with-seconds":"",format24h:""},model:{value:e.filters[l].value,callback:function(t){e.$set(e.filters[l],"value",t)},expression:"filters[index].value"}})],1)]},proxy:!0}],null,!0),model:{value:e.filters[l].value,callback:function(t){e.$set(e.filters[l],"value",t)},expression:"filters[index].value"}}):e.filters[l].type.label.includes("Datetime")?a("q-input",{attrs:{filled:"",borderless:"",dense:"",debounce:"300",readonly:"",placeholder:t.label,mask:"##/##/#### ##:##:##"},on:{click:function(a){return a.target!==a.currentTarget?null:e.showDatetimePicker("datetime"+t.label,t.label)}},scopedSlots:e._u([{key:"append",fn:function(){return[e.filters[l].value?a("q-icon",{attrs:{name:"clear"},on:{click:function(a){return a.stopPropagation(),e.clearDatetime(""+t.label,l)}}}):a("q-icon",{attrs:{name:"search"}}),a("q-popup-proxy",{ref:"datetime"+t.label,refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale",breakpoint:"2000"}},[a("q-card",[a("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:e.datetimeTab,callback:function(t){e.datetimeTab=t},expression:"datetimeTab"}},[a("q-tab",{attrs:{name:"Date",label:"Date"}}),a("q-tab",{attrs:{name:"Time",label:"Time"}})],1),a("q-separator"),a("q-tab-panels",{attrs:{animated:""},model:{value:e.datetimeTab,callback:function(t){e.datetimeTab=t},expression:"datetimeTab"}},[a("q-tab-panel",{attrs:{name:"Date"}},[a("div",{staticClass:"text-center"},[e._v("\n                                  "+e._s(e.filters[l].value)+"\n                                ")]),a("q-date",{attrs:{mask:"DD/MM/YYYY HH:mm:ss"},model:{value:e.filters[l].value,callback:function(t){e.$set(e.filters[l],"value",t)},expression:"filters[index].value"}})],1),a("q-tab-panel",{attrs:{name:"Time"}},[a("div",{staticClass:"text-center"},[e._v("\n                                  "+e._s(e.filters[l].value)+"\n                                ")]),a("q-time",{attrs:{mask:"DD-MM-YYYY HH:mm:ss","with-seconds":"",format24h:""},model:{value:e.filters[l].value,callback:function(t){e.$set(e.filters[l],"value",t)},expression:"filters[index].value"}})],1)],1)],1)],1)]},proxy:!0}],null,!0),model:{value:e.filters[l].value,callback:function(t){e.$set(e.filters[l],"value",t)},expression:"filters[index].value"}}):e.filters[l].type.label.includes("Dates")?a("q-input",{attrs:{borderless:"",dense:"",filled:"",debounce:"300",readonly:"",placeholder:t.label,mask:"##/##/####"},on:{click:function(a){return a.target!==a.currentTarget?null:e.showDatePicker("date"+t.label,t.label)}},scopedSlots:e._u([{key:"append",fn:function(){return[e.filters[l].value?a("q-icon",{attrs:{name:"clear"},on:{click:function(a){return a.stopPropagation(),e.clearTgl(""+t.label,l)}}}):a("q-icon",{attrs:{name:"search"}}),a("q-popup-proxy",{ref:"date"+t.label,refInFor:!0,attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"DD/MM/YYYY"},on:{input:function(){return e.$refs["date"+t.label][0].hide()}},model:{value:e.filters[l].value,callback:function(t){e.$set(e.filters[l],"value",t)},expression:"filters[index].value"}})],1)]},proxy:!0}],null,!0),model:{value:e.filters[l].value,callback:function(t){e.$set(e.filters[l],"value",t)},expression:"filters[index].value"}}):e._e()],1):e._e()])])})),0)])]},proxy:!0},{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[e._l(t.cols,(function(l){return a("q-td",{key:l.name,attrs:{props:t}},[e._v("\n                "+e._s("null"!=l.value?l.value:"")+"\n              ")])}))],2)]}}])})],1)]),a("div",{staticClass:"row full-width justify-between q-mt-md"},[a("q-btn",{attrs:{color:"primary",label:"Generate"},on:{click:function(t){return e.loadDataQuery()}}}),a("q-btn",{attrs:{color:"positive","icon-right":"archive",label:"Export to Excel",disable:!(e.dataToShow.length>0),"no-caps":""},on:{click:function(t){return e.exportExcel(e.columns,e.dataToShow,"generated-report")}}})],1)])},i=[],s=(a("6762"),a("2fdb"),a("967e")),n=a.n(s),r=(a("96cf"),a("fa84")),o=a.n(r),c=a("2b0e"),u=a("1c16"),d={mixins:[c["a"].prototype.$mixinStore],components:{dropdownFilter:function(){return a.e(6).then(a.bind(null,"5e40"))}},data:function(){return{koneksi:[],selectedKoneksi:"",query:"",columns:[],data:[],dataToShow:[],filters:[],dataType:[{ID:1,Nama:"Text/Contain"},{ID:2,Nama:"Datetime/Equal"},{ID:3,Nama:"Dates/Equal"},{ID:4,Nama:"Time/Equal"}],datetimeTab:"Date",isClearDate:{},isClearTime:{},isClearDatetime:{}}},mounted:function(){this.setBarTitle("Generate Report"),this.loadDataKoneksi()},watch:{filters:{handler:function(){Object(u["a"])(this.filterdata(),500)},deep:!0}},methods:{loadDataKoneksi:function(){var e=this;return o()(n.a.mark((function t(){var a,l;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,e.post({url:"".concat(a.baseURL,"getKoneksi"),data:{}});case 3:l=t.sent,"success"===l.info?e.koneksi=l.data:e.showNotif();case 5:case"end":return t.stop()}}),t)})))()},loadDataQuery:function(){var e=this;return o()(n.a.mark((function t(){var a,l;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,!e.query||!e.selectedKoneksi.value){t.next=8;break}return t.next=4,e.post({url:"".concat(a.baseURL,"getDataFromDB"),data:{ID:e.selectedKoneksi.value,Query:e.query}});case 4:l=t.sent,"success"===l.info?l.data.length>0?(e.data=l.data,e.dataToShow=l.data,e.dataToColumn(l.data)):e.showNotif("Tidak ada data yang dapat ditampilkan !"):e.showNotif(),t.next=9;break;case 8:e.showNotif("Pilih koneksi kemudian isi query nya !");case 9:case"end":return t.stop()}}),t)})))()},dataToColumn:function(e){var t=this;if(e.length){var a=e,l=a[0];this.columns=[];var i=function(e){t.columns.push({name:e,align:"center",label:e,field:function(t){return t[e]},format:function(e){return"".concat(e||"")},sortable:!0}),t.filters.push({label:e,value:"",type:{label:"",value:""}})};for(var s in l)i(s)}},filterdata:function(){var e=this,t=this,a=t.data;t.dataToShow=a.filter((function(a){var l=0,i=!0;return t.filters.forEach((function(s){s.type.value&&(null==a[s.label]?i=!1:e.compareData(a[s.label],t.filters[l].value)||(i=!1)),l++})),i}))},setTypeFilter:function(e,t,a){this.filters[t].type=e,this.filters[t].value="",this.filters[t].type.label.includes("Dates")&&this.$set(this.isClearDate,a,!1),this.filters[t].type.label.includes("Time")&&this.$set(this.isClearTime,a,!1),this.filters[t].type.label.includes("Datetime")&&this.$set(this.isClearDatetime,a,!1)},showDatePicker:function(e,t){this.isClearDate[t]||this.$refs[""+e][0].show(),this.isClearDate[t]=!1},clearTgl:function(e,t){this.filters[t].value="",this.isClearDate[e]=!0},showTimePicker:function(e,t){this.isClearTime[t]||this.$refs[""+e][0].show(),this.isClearTime[t]=!1},clearTime:function(e,t){this.filters[t].value="",this.isClearTime[e]=!0},showDatetimePicker:function(e,t){this.isClearDatetime[t]||(this.datetimeTab="Date",this.$refs[""+e][0].show()),this.isClearDatetime[t]=!1},clearDatetime:function(e,t){this.filters[t].value="",this.isClearDatetime[e]=!0}}},f=d,p=a("2877"),m=a("eebe"),b=a.n(m),h=a("9989"),v=a("27f9"),k=a("eaac"),y=a("3b73"),w=a("0016"),T=a("7cbe"),x=a("ca78"),D=a("f09f"),q=a("429b"),C=a("7460"),g=a("eb85"),Q=a("adad"),_=a("823b"),P=a("52ee"),$=a("bd08"),I=a("db86"),S=a("9c40"),Y=Object(p["a"])(f,l,i,!1,null,null,null);t["default"]=Y.exports;b()(Y,"components",{QPage:h["a"],QInput:v["a"],QTable:k["a"],QExpansionItem:y["a"],QIcon:w["a"],QPopupProxy:T["a"],QTime:x["a"],QCard:D["a"],QTabs:q["a"],QTab:C["a"],QSeparator:g["a"],QTabPanels:Q["a"],QTabPanel:_["a"],QDate:P["a"],QTr:$["a"],QTd:I["a"],QBtn:S["a"]})}}]);